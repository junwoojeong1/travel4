<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>오사카 여행 — 성인 준우의 첫 여행</title>

<!-- 참고로 업로드된 이미지 로컬 경로(필요시 변환해서 사용) -->
<!-- /mnt/data/20251125_19024238.jpg -->
<!-- /mnt/data/20251125_19024627.jpg -->
<!-- /mnt/data/20251125_19025513.jpg -->

<style>
/* 폰트 (요청한 것 사용) */
@font-face { font-family: 'FlightSans'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2410-1@1.0/FlightSans-Bold.woff2') format('woff2'); font-weight:700; font-display:swap;}
@font-face { font-family: 'GMarketSans'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff'); font-weight:500; font-display:swap;}
@import url('https://cdn.jsdelivr.net/gh/wanteddev/wanted-sans@v1.0.1/packages/wanted-sans/fonts/webfonts/variable/split/WantedSansVariable.min.css');

:root{
  --page-bg: #FAF9F6;
  --text: #071428;
  --muted: #6f7b84;
  --card-bg: #ffffff;
  --accent: #1ea6ff;
  --accent-2: #28c7ff;
  --accent-warm: #ff8c42;
  --chip-bg: rgba(30,166,255,0.08);
  --max-mobile:420px;
  --radius:14px;
  --spacer-h: 120vh; /* 시작 페이지와 Day 간격: 휴대폰 하나 이상 */
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--page-bg);color:var(--text);font-family:'Wanted Sans','WantedSansVariable', "Noto Sans KR", system-ui,-apple-system; -webkit-font-smoothing:antialiased}
.container{margin:0 auto;width:100%;max-width:var(--max-mobile);min-height:100vh;display:flex;flex-direction:column;padding-bottom:calc(132px + env(safe-area-inset-bottom));overflow-x:hidden}

/* HERO */
.hero{
  position:relative;width:100%;height:50vw;min-height:320px;overflow:hidden;border-bottom-left-radius:18px;border-bottom-right-radius:18px;margin-top:10px;box-shadow:0 10px 30px rgba(10,14,20,0.06)
}
.hero iframe{
  position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);min-width:100%;min-height:100%;width:auto;height:auto;border:0;pointer-events:none;filter:contrast(0.95) brightness(0.78) saturate(1.05);z-index:0
}
.hero::after{content:"";position:absolute;inset:0;z-index:1;background:linear-gradient(180deg, rgba(250,249,246,0.0), rgba(250,249,246,0.36));}

/* HERO 텍스트: 명확한 가독성을 위해 다크 텍스트 사용 */
.hero-inner{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;padding:22px}
.subtitle{font-family:'GMarketSans',sans-serif;font-weight:500;color:var(--text);background:rgba(255,255,255,0.88);padding:6px 10px;border-radius:999px;margin-bottom:10px;box-shadow:0 6px 18px rgba(10,14,20,0.04)}
.title{font-family:'FlightSans','FlightSans-Bold',sans-serif;font-size:2.6rem;font-weight:700;color:var(--text);margin:0;text-shadow:none}
.dates{margin-top:12px;background:rgba(7,20,30,0.03);padding:8px 14px;border-radius:12px;color:var(--muted);font-weight:700}

/* CTA (클릭 애니메이션) */
.hero-cta{
  margin-top:22px;display:inline-flex;align-items:center;gap:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#01202b;padding:12px 18px;border-radius:999px;font-weight:900;border:0;cursor:pointer;box-shadow:0 12px 40px rgba(30,166,255,0.14);
  transition: transform .12s ease, box-shadow .12s;
}
.hero-cta:active{transform:translateY(2px) scale(.995); box-shadow:0 8px 20px rgba(30,166,255,0.08)}

/* 스페이서: 시작 페이지와 Day 간격 (휴대폰 한대 분 이상) */
.spacer{height:var(--spacer-h); width:100%;}

/* Day header */
.day-header{display:flex;align-items:center;justify-content:center;gap:16px;padding:12px 6px;margin-top:18px;position:relative}
.day-arrow{position:absolute;left:8px;top:50%;transform:translateY(-50%);opacity:0.92;background:transparent;border:0;color:var(--muted);font-size:1.1rem;padding:8px;border-radius:10px}
.day-arrow.right{left:auto;right:8px}
.day-title{font-weight:900;font-size:1.12rem;color:var(--text)}
.day-sub{font-size:0.82rem;color:var(--muted);font-weight:700;margin-top:2px}

/* add button */
.add-btn{display:block;margin:8px auto;border-radius:12px;background:linear-gradient(90deg,var(--accent),var(--accent-2));padding:12px 18px;color:#01202b;font-weight:900;text-align:center;min-width:220px;box-shadow:0 10px 30px rgba(30,166,255,0.12);cursor:pointer;border:0;transition:transform .12s}
.add-btn:active{transform:translateY(2px)}

/* Day0 필터 바 (Day0에서만 표시) */
.filter-bar{
  display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:center;padding:10px 6px;margin:8px 10px;border-radius:12px;background:rgba(255,255,255,0.85);box-shadow:0 6px 18px rgba(10,14,20,0.03)
}
.filter-bar select, .filter-bar input[type="text"]{padding:8px 10px;border-radius:10px;border:1px solid rgba(7,20,30,0.06);background:white;color:var(--text);font-weight:700}
.filter-bar .small{font-size:0.85rem;color:var(--muted);font-weight:700}

/* card */
.card-empty{margin:18px;border-radius:14px;padding:28px 22px;text-align:center;background:var(--card-bg);box-shadow:0 18px 48px rgba(10,14,20,0.04);border:1px solid rgba(7,20,30,0.04)}
.card-empty h3{font-size:1.15rem;margin:8px 0 4px 0;color:var(--text)}
.card-empty p{color:var(--muted);margin:6px 0 14px 0}

/* places list */
.places{margin:14px;padding:0 10px 20px 10px;display:flex;flex-direction:column;gap:12px}
.place{background:var(--card-bg);border-radius:12px;padding:12px;border:1px solid rgba(7,20,30,0.04);display:flex;flex-direction:column;gap:8px;transition:transform .12s, box-shadow .12s}
.place:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(10,14,20,0.04)}
.place-summary{display:flex;align-items:center;justify-content:space-between;gap:8px}
.place-left{display:flex;gap:12px;align-items:center;min-width:0;flex:1}
.place-name{font-weight:900;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.place-type{color:var(--muted);font-weight:800;font-size:0.9rem}
.badge{background:linear-gradient(90deg,var(--accent-2),var(--accent));padding:8px 10px;border-radius:10px;font-weight:900;color:#01202b;min-width:44px;text-align:center}
.chips{display:flex;gap:6px;flex-wrap:wrap}
.chip{background:var(--chip-bg);color:var(--text);font-weight:800;padding:6px 8px;border-radius:999px;font-size:0.78rem;border:1px solid rgba(30,166,255,0.12)}

/* detail animation */
.place-detail{ display:block; max-height:0; overflow:hidden; opacity:0; transition: max-height .28s cubic-bezier(.2,.9,.2,1), opacity .18s ease; padding-top:0; margin-top:0; border-top:none;}
.place.open .place-detail{ max-height:520px; opacity:1; padding-top:10px; margin-top:10px; border-top:1px dashed rgba(7,20,30,0.04);}

/* inputs */
.input, textarea, select{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(7,20,30,0.06);background:transparent;color:var(--text)}
.row{display:flex;gap:10px;align-items:center}
.row .label{min-width:70px;font-weight:800;color:var(--muted)}
.range{flex:1}
.small-actions{display:flex;gap:8px;align-items:center}

/* bottom bar */
.bottom-bar{position:fixed;left:50%;transform:translateX(-50%);bottom:0;z-index:200;width:100%;max-width:var(--max-mobile);padding:12px calc(14px + env(safe-area-inset-left)) calc(12px + env(safe-area-inset-bottom)) calc(14px + env(safe-area-inset-right));display:flex;gap:10px;align-items:center;justify-content:center;background:transparent}
.save-btn{background:linear-gradient(90deg,var(--accent-2),var(--accent));padding:12px 18px;border-radius:12px;border:0;font-weight:900;color:#01202b;cursor:pointer;min-width:110px}
.export-btn{background:white;border:1px solid rgba(7,20,30,0.06);padding:10px 12px;border-radius:12px;color:var(--muted);font-weight:800;cursor:pointer}
.import-label{background:white;border:1px dashed rgba(7,20,30,0.06);padding:10px 12px;border-radius:12px;color:var(--muted);font-weight:800;cursor:pointer}

/* smooth scrolling baseline */
html { scroll-behavior: smooth; }

/* responsive */
@media(min-width:900px){ .container{max-width:960px} .title{font-size:3.4rem} .hero{height:56vh;border-radius:20px} }
</style>
</head>
<body>
  <div class="container" id="app">
    <!-- HERO -->
    <header class="hero" id="hero" role="banner" aria-label="오사카 야경">
      <iframe id="bgVideo" src="https://www.youtube.com/embed/G5RpJwCJDqc?autoplay=1&mute=1&controls=0&loop=1&playlist=G5RpJwCJDqc&modestbranding=1&playsinline=1" allow="autoplay; fullscreen; picture-in-picture"></iframe>

      <div class="hero-inner">
        <div class="subtitle">성인 준우의 첫 여행</div>
        <h1 class="title">오사카 여행</h1>
        <div class="dates">2025.12.6. — 2025.12.13</div>
        <button class="hero-cta" id="startPlanBtn">여행 시작하기 →</button>
      </div>
    </header>

    <!-- spacer: increases gap between start and day pages -->
    <div class="spacer" id="spacer"></div>

    <!-- Day header -->
    <div class="day-header" role="navigation" aria-label="Day navigation">
      <button class="day-arrow" id="prevDay">◀</button>
      <div style="text-align:center">
        <div class="day-title" id="dayTitle">Day 0</div>
        <div class="day-sub" id="dayDate">전체 일정</div>
      </div>
      <button class="day-arrow right" id="nextDay">▶</button>
    </div>

    <!-- Top add -->
    <button class="add-btn" id="addTopBtn">＋ 장소 추가하기</button>

    <!-- Filter bar (visible only on Day0) -->
    <div id="filterBarContainer" style="margin:8px">
      <div class="filter-bar" id="filterBar">
        <div class="small">종류</div>
        <select id="filterType"><option value="">전체</option></select>

        <div class="small">태그</div>
        <select id="filterTag"><option value="">전체</option></select>

        <div class="small">매력 정렬</div>
        <select id="sortCharm"><option value="none">기본</option><option value="desc">높은순</option><option value="asc">낮은순</option></select>

        <div class="small">이동시간</div>
        <select id="filterMove"><option value="">전체</option><option value="30">30분 이하</option><option value="60">1시간 이하</option><option value="120">2시간 이하</option><option value="240">2시간 이상</option></select>

        <div class="small">검색</div>
        <input id="searchTxt" type="text" placeholder="이름 / 종류 / 라벨로 검색" />

        <button id="clearFilters" style="padding:8px 10px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#01202b;font-weight:900;cursor:pointer">초기화</button>
      </div>
    </div>

    <!-- Day card / list -->
    <main>
      <section class="day-card">
        <div id="placesRoot">
          <div class="card-empty" id="emptyCard" style="display:none">
            <div style="width:72px;height:72px;margin:0 auto;border-radius:50%;background:rgba(30,166,255,0.06);display:flex;align-items:center;justify-content:center;">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" stroke="#1fb3ff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
            <h3>장소가 없습니다</h3>
            <p>첫 장소를 추가해보세요 ✨</p>
            <button class="small-add" id="emptyAddBtn">＋ 장소 추가하기</button>
          </div>

          <div class="places" id="placesList"></div>
        </div>
      </section>
    </main>

    <!-- Bottom Add -->
    <button class="add-btn" id="addBottomBtn" style="margin-bottom:16px">＋ 장소 추가하기</button>

    <footer style="text-align:center;color:var(--muted);padding:10px 0 60px 0;font-weight:700">저장: 로컬 · GitHub Pages 배포 가능</footer>
  </div>

  <!-- bottom bar -->
  <div class="bottom-bar" role="region" aria-label="하단 바">
    <button id="saveBtn" class="save-btn" title="현재 Day 저장">저장</button>
    <button id="exportBtn" class="export-btn">내보내기 (JSON)</button>
    <label class="import-label">불러오기 <input id="importFile" type="file" accept="application/json" style="display:none"></label>
    <div style="width:8px"></div>
    <div id="statusText" style="color:var(--muted);font-weight:800">변경 사항 없음</div>
  </div>

<script>
/* App JS (수정본)
 - 검색은 Day0에만 표시 (filterBarContainer 표시 제어)
 - Day0는 모든 장소 목록을 쭉 보여줌 (필터 적용 가능)
 - 제목 색상/버튼 색상 보정은 CSS에 반영
 - spacer(높은 여백) 추가
 - 길게 스크롤 또는 버튼 클릭 시 빠른 애니메이션으로 Day1으로 이동
 - 터치 스와이프/휠 제스처로 이동 트리거
 - 기존 기능(저장, 내보내기, 불러오기, 라벨, 날짜 이동) 유지
*/

const TOTAL_DAYS = 9;
let currentDay = 0; // 0 = Day 0 (전체)
const dayLabels = ['전체 일정','12월 6일','12월 7일','12월 8일','12월 9일','12월 10일','12월 11일','12월 12일','12월 13일','12월 14일'];

// 추천 라벨
const RECOMMENDED_LABELS = [
  '맛집','카페','관광지','쇼핑','뷰포인트','온천','야경','역/교통','시장','박물관','휴식'
];

// DOM refs
const hero = document.getElementById('hero');
const spacer = document.getElementById('spacer');
const startPlanBtn = document.getElementById('startPlanBtn');
const dayTitle = document.getElementById('dayTitle');
const dayDate = document.getElementById('dayDate');
const prevDay = document.getElementById('prevDay');
const nextDay = document.getElementById('nextDay');
const addTopBtn = document.getElementById('addTopBtn');
const addBottomBtn = document.getElementById('addBottomBtn');
const emptyAddBtn = document.getElementById('emptyAddBtn');
const placesList = document.getElementById('placesList');
const emptyCard = document.getElementById('emptyCard');
const saveBtn = document.getElementById('saveBtn');
const exportBtn = document.getElementById('exportBtn');
const importFile = document.getElementById('importFile');
const statusText = document.getElementById('statusText');

const filterBarContainer = document.getElementById('filterBarContainer');
const filterType = document.getElementById('filterType');
const filterTag = document.getElementById('filterTag');
const sortCharm = document.getElementById('sortCharm');
const filterMove = document.getElementById('filterMove');
const searchTxt = document.getElementById('searchTxt');
const clearFilters = document.getElementById('clearFilters');

// storage helpers
function storageKey(d){ return 'osaka_day_' + d; }
for(let i=1;i<=TOTAL_DAYS;i++){
  if(!localStorage.getItem(storageKey(i))) localStorage.setItem(storageKey(i), JSON.stringify({places:[]}));
}
function loadDay(d){
  if(d < 1 || d > TOTAL_DAYS) return { places: [] };
  try{ return JSON.parse(localStorage.getItem(storageKey(d))) || {places:[]} }catch(e){ return {places:[]} }
}
function saveDay(data, d){
  if(d < 1 || d > TOTAL_DAYS) return;
  localStorage.setItem(storageKey(d), JSON.stringify(data));
}
function loadAllPlaces(){
  const all = [];
  for(let d=1; d<=TOTAL_DAYS; d++){
    const day = loadDay(d);
    (day.places || []).forEach(p => { all.push({...p, _day: d}); });
  }
  return all;
}
function setStatus(txt){
  statusText.textContent = txt;
  if(txt === '변경 사항 없음') saveBtn.classList.remove('active'); else saveBtn.classList.add('active');
}

// place factory
function newPlace(){
  return { id:'p_'+Date.now()+Math.floor(Math.random()*1000), name:'', type:'', location:3, price:3, charm:3, memo:'', moveToNext:'', labels:[] };
}

// rebuild filter options from existing data
function rebuildFilterOptions(){
  const all = loadAllPlaces();
  const types = Array.from(new Set(all.map(p => (p.type||'').trim()).filter(Boolean))).sort();
  filterType.innerHTML = '<option value="">전체</option>';
  types.forEach(t => { const o = document.createElement('option'); o.value=t; o.textContent=t; filterType.appendChild(o); });

  const allLabels = new Set(RECOMMENDED_LABELS);
  all.forEach(p => (p.labels||[]).forEach(l=>allLabels.add(l)));
  filterTag.innerHTML = '<option value="">전체</option>';
  Array.from(allLabels).sort().forEach(l => { const o = document.createElement('option'); o.value=l; o.textContent=l; filterTag.appendChild(o); });
}

/* render */
function render(){
  // header
  dayTitle.textContent = currentDay === 0 ? 'Day 0' : 'Day ' + currentDay;
  dayDate.textContent = dayLabels[currentDay] || '';

  // show/hide filter bar only on Day0
  filterBarContainer.style.display = (currentDay === 0) ? 'block' : 'none';

  rebuildFilterOptions();

  let items = [];
  if(currentDay === 0) items = loadAllPlaces();
  else {
    const d = loadDay(currentDay);
    items = (d.places || []).map(p => ({...p, _day: currentDay}));
  }

  // Day0 filters/search/sort
  if(currentDay === 0){
    const tfilter = filterType.value;
    const tagfilter = filterTag.value;
    const movefilter = filterMove.value;
    const q = (searchTxt.value || '').toLowerCase();
    items = items.filter(p => {
      if(tfilter && ((p.type||'').toLowerCase() !== tfilter.toLowerCase())) return false;
      if(tagfilter && !((p.labels||[]).includes(tagfilter))) return false;
      if(movefilter && String(p.moveToNext || '') !== movefilter) return false;
      if(q){
        const hay = ((p.name||'') + ' ' + (p.type||'') + ' ' + ((p.labels||[]).join(' '))).toLowerCase();
        if(!hay.includes(q)) return false;
      }
      return true;
    });
    const sortMode = sortCharm.value;
    if(sortMode === 'desc') items.sort((a,b)=> (b.charm||0)-(a.charm||0));
    if(sortMode === 'asc') items.sort((a,b)=> (a.charm||0)-(b.charm||0));
  }

  // always show full list (Day0 and others)
  placesList.innerHTML = '';
  if(!items || items.length === 0){
    emptyCard.style.display = 'block';
    return;
  } else emptyCard.style.display = 'none';

  items.forEach((p, idx) => {
    const el = document.createElement('div'); el.className = 'place'; el.dataset.id = p.id;
    const sum = document.createElement('div'); sum.className = 'place-summary';
    const left = document.createElement('div'); left.className = 'place-left';
    const badge = document.createElement('div'); badge.className = 'badge'; badge.textContent = p.charm || 3;
    const info = document.createElement('div');
    const name = document.createElement('div'); name.className = 'place-name'; name.textContent = p.name || '무제 장소';
    const type = document.createElement('div'); type.className = 'place-type'; type.textContent = p.type || '종류 미지정';
    info.appendChild(name); info.appendChild(type);
    left.appendChild(badge); left.appendChild(info);

    if(currentDay === 0){
      const dayChip = document.createElement('div'); dayChip.className='chip'; dayChip.style.marginLeft='8px'; dayChip.textContent = 'Day ' + (p._day || '?');
      left.appendChild(dayChip);
    }

    // label chips
    const chipsWrap = document.createElement('div'); chipsWrap.className='chips';
    (p.labels || []).forEach(lbl => { const c = document.createElement('div'); c.className='chip'; c.textContent = lbl; chipsWrap.appendChild(c); });

    const right = document.createElement('div'); right.style.display='flex'; right.style.flexDirection='column'; right.style.alignItems='flex-end';
    const dot = document.createElement('div'); dot.className = 'chev'; dot.textContent = '⋯';
    right.appendChild(dot);
    sum.appendChild(left); sum.appendChild(right);

    // detail area
    const detail = document.createElement('div'); detail.className = 'place-detail';
    const inputName = document.createElement('input'); inputName.className='input'; inputName.placeholder='장소명'; inputName.value = p.name || '';
    const inputType = document.createElement('input'); inputType.className='input'; inputType.placeholder='장소 종류'; inputType.value = p.type || '';

    // labels area
    const labelBox = document.createElement('div'); labelBox.style.display='flex'; labelBox.style.flexDirection='column'; labelBox.style.gap='8px';
    const labelRow = document.createElement('div'); labelRow.style.display='flex'; labelRow.style.flexWrap='wrap'; labelRow.style.gap='8px';
    RECOMMENDED_LABELS.forEach(lbl => {
      const cb = document.createElement('button'); cb.type='button'; cb.className='chip'; cb.textContent = lbl; cb.style.cursor='pointer';
      if((p.labels||[]).includes(lbl)) { cb.style.background = 'linear-gradient(90deg,var(--accent-2),var(--accent))'; cb.style.color='#01202b'; }
      cb.addEventListener('click', ()=> {
        p.labels = p.labels || [];
        if(p.labels.includes(lbl)){ p.labels = p.labels.filter(x=>x!==lbl); cb.style.background = 'var(--chip-bg)'; cb.style.color='var(--text)'; }
        else { p.labels.push(lbl); cb.style.background = 'linear-gradient(90deg,var(--accent-2),var(--accent))'; cb.style.color='#01202b'; }
        el.dataset.dirty = '1'; setStatus('저장 필요 — 변경 사항 있음');
      });
      labelRow.appendChild(cb);
    });
    labelBox.appendChild(labelRow);
    const addLabelRow = document.createElement('div'); addLabelRow.style.display='flex'; addLabelRow.style.gap='8px';
    const labelInput = document.createElement('input'); labelInput.className='input'; labelInput.placeholder='직접 라벨 추가';
    const labelAddBtn = document.createElement('button'); labelAddBtn.className='add-btn'; labelAddBtn.style.padding='8px 10px'; labelAddBtn.style.minWidth='auto'; labelAddBtn.textContent='추가';
    labelAddBtn.addEventListener('click', ()=> {
      const val = (labelInput.value || '').trim(); if(!val) return;
      p.labels = p.labels || []; if(!p.labels.includes(val)) p.labels
